"use strict";(globalThis.webpackChunkkonifer_docs=globalThis.webpackChunkkonifer_docs||[]).push([[208],{3046:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>a,contentTitle:()=>l,default:()=>o,frontMatter:()=>i,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"Reference/Assets API/asset-storing","title":"Storing Assets","description":"When you store an asset, the asset and it\'s metadata are stored in your object store and database, respectively.","source":"@site/docs/Reference/Assets API/store-assets.md","sourceDirName":"Reference/Assets API","slug":"/Reference/Assets API/asset-storing","permalink":"/konifer-docs/Reference/Assets API/asset-storing","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"id":"asset-storing","title":"Storing Assets","sidebar_label":"Store"},"sidebar":"docsSidebar","previous":{"title":"Overview","permalink":"/konifer-docs/Reference/Assets API/assets-overview"},"next":{"title":"Fetch","permalink":"/konifer-docs/Reference/Assets API/asset-fetching"}}');var r=t(4848),d=t(8453);const i={sidebar_position:2,id:"asset-storing",title:"Storing Assets",sidebar_label:"Store"},l=void 0,a={},c=[{value:"Multipart Upload",id:"multipart-upload",level:2},{value:"Metadata JSON structure",id:"metadata-json-structure",level:3},{value:"URL Source",id:"url-source",level:2},{value:"Request Metadata Fields",id:"request-metadata-fields",level:2},{value:"Asset Metadata Response",id:"asset-metadata-response",level:2},{value:"AssetVariant",id:"assetvariant",level:3}];function h(e){const s={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.p,{children:"When you store an asset, the asset and it's metadata are stored in your object store and database, respectively.\nThere are two ways to store an asset:"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Multipart Upload:"})," Use this when the asset content is available locally."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"URL Source:"})," Use this when the asset content must be downloaded by Konifer from an external URL."]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"The URL structure for both is:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-http",children:"POST /assets/{your/defined/path}\n"})}),"\n",(0,r.jsx)(s.p,{children:"And the difference is how the content will be supplied. Both methods cannot be used at the same time."}),"\n",(0,r.jsx)(s.h2,{id:"multipart-upload",children:"Multipart Upload"}),"\n",(0,r.jsx)(s.p,{children:"A multipart upload lets you specify the asset content and metadata in the same request."}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Part Name"}),(0,r.jsx)(s.th,{children:"Content-Type"}),(0,r.jsx)(s.th,{children:"Purpose"}),(0,r.jsx)(s.th,{children:"Required?"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"metadata"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"application/json"})}),(0,r.jsx)(s.td,{children:"A JSON body containing custom, user-defined data about the asset"}),(0,r.jsx)(s.td,{children:"Yes"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"asset"})}),(0,r.jsxs)(s.td,{children:["Image MIME type (e.g., ",(0,r.jsx)(s.code,{children:"image/jpeg"}),")"]}),(0,r.jsx)(s.td,{children:"The raw binary content of the file being stored."}),(0,r.jsx)(s.td,{children:"Yes"})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"metadata-json-structure",children:"Metadata JSON structure"}),"\n",(0,r.jsxs)(s.p,{children:["The structure for the ",(0,r.jsx)(s.code,{children:"metadata"})," part is:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'{\n  "alt": "The alt text for an image",\n  "labels": {\n    "label-key": "label-value",\n    "phone": "Android"\n  },\n  "tags": [ "cold", "verified" ]\n}\n'})}),"\n",(0,r.jsx)(s.h2,{id:"url-source",children:"URL Source"}),"\n",(0,r.jsxs)(s.p,{children:["Instead of supplying the file contents directly, you can specify a URL that Konifer will download the asset content from.\nThe request is identical to the multipart ",(0,r.jsx)(s.code,{children:"metadata"}),", but you will add a ",(0,r.jsx)(s.code,{children:"url"})," to the request:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'{\n  "url": "https://yoururl.com/image.jpeg",\n  "alt": "The alt text for an image",\n  "labels": {\n    "label-key": "label-value",\n    "phone": "Android"\n  },\n  "tags": [ "cold", "verified" ]\n}\n'})}),"\n",(0,r.jsxs)(s.p,{children:["Additionally, since there is only JSON in the request, the ",(0,r.jsx)(s.code,{children:"Content-Type"})," is ",(0,r.jsx)(s.code,{children:"application/json"}),"."]}),"\n",(0,r.jsx)(s.h2,{id:"request-metadata-fields",children:"Request Metadata Fields"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Field Name"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"}),(0,r.jsx)(s.th,{children:"Required?"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"url"})}),(0,r.jsx)(s.td,{children:"String"}),(0,r.jsx)(s.td,{children:"The URL source of the asset content"}),(0,r.jsxs)(s.td,{children:["For URL upload source, ",(0,r.jsx)(s.strong,{children:"yes"})]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"alt"})}),(0,r.jsx)(s.td,{children:"String"}),(0,r.jsx)(s.td,{children:"The alt text of your asset"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"No"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"labels"})}),(0,r.jsx)(s.td,{children:"Object"}),(0,r.jsx)(s.td,{children:"Key-value pairs associated with the asset"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"No"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"tags"})}),(0,r.jsx)(s.td,{children:"Array"}),(0,r.jsx)(s.td,{children:"Attributes associated with the asset"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"No"})})]})]})]}),"\n",(0,r.jsx)(s.h1,{id:"store-asset-response",children:"Store Asset Response"}),"\n",(0,r.jsxs)(s.p,{children:["Regardless of the upload method used, a successful storage request returns a ",(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.code,{children:"201 Created"})})," status and the following JSON response\nrepresenting the asset metadata."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'{\n  "class": "IMAGE",\n  "alt": "The alt text for an image",\n  "entryId": 42, // Unique identifier scoped to the path\n  "labels": {\n    "label-key": "label-value",\n    "phone": "Android"\n  },\n  "tags": [ "cold", "verified" ],\n  "source": "URL", // or UPLOAD if using multipart upload\n  "sourceUrl": "https://yoururl.com/image.jpeg",\n  "variants": [\n    {\n      "bucket": "assets", // Defined in configuration\n      "storeKey": "d905170f-defd-47e4-b606-d01993ba7b42", // Generated by Konifer\n      "attributes": {\n        "height": 100,\n        "width": 200,\n        "format": "jpg"\n      },\n      "lqip": { // Empty if LQIPs are disabled\n        "blurhash": "BASE64",\n        "thumbhash": "BASE64"\n      }\n    }\n  ],\n  "createdAt": "2025-11-12T01:20:55" // ISO 8601\n}\n'})}),"\n",(0,r.jsxs)(s.p,{children:["Additionally, a ",(0,r.jsx)(s.code,{children:"Location"})," header is returned containing a URL to the asset's link return format."]}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsx)(s.p,{children:"Note: the entryId query modifier is supplied so the URL is absolute and can be used for subsequent GET and PUT operations."}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"asset-metadata-response",children:"Asset Metadata Response"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Field Name"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"class"})}),(0,r.jsx)(s.td,{children:"String"}),(0,r.jsxs)(s.td,{children:["The type of the asset, currently always ",(0,r.jsx)(s.code,{children:"IMAGE"})]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"alt"})}),(0,r.jsx)(s.td,{children:"String"}),(0,r.jsx)(s.td,{children:"The supplied alt text of your asset"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"entryId"})}),(0,r.jsx)(s.td,{children:"Long"}),(0,r.jsx)(s.td,{children:"System-generated unique identifier of asset within path"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"labels"})}),(0,r.jsx)(s.td,{children:"Object"}),(0,r.jsx)(s.td,{children:"Supplied key-value pairs associated with the asset"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"tags"})}),(0,r.jsx)(s.td,{children:"Array"}),(0,r.jsx)(s.td,{children:"Supplied attributes associated with the asset"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"source"})}),(0,r.jsx)(s.td,{children:"String"}),(0,r.jsxs)(s.td,{children:["Either ",(0,r.jsx)(s.code,{children:"URL"})," or ",(0,r.jsx)(s.code,{children:"UPLOAD"})," depending on how you provided asset content"]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"sourceUrl"})}),(0,r.jsx)(s.td,{children:"String"}),(0,r.jsx)(s.td,{children:"If URL source was used, then this is the supplied URL"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"variants"})}),(0,r.jsx)(s.td,{children:"AssetVariant"}),(0,r.jsx)(s.td,{children:"Will only contain the original variant - the one supplied"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"createdAt"})}),(0,r.jsx)(s.td,{children:"ISO 8601"}),(0,r.jsx)(s.td,{children:"Date asset was stored"})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"assetvariant",children:"AssetVariant"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Field Name"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"bucket"})}),(0,r.jsx)(s.td,{children:"String"}),(0,r.jsx)(s.td,{children:"The S3 bucket the asset is stored in - defined in path configuration"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"storeKey"})}),(0,r.jsx)(s.td,{children:"String"}),(0,r.jsx)(s.td,{children:"The key of the asset in the object store"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"imageAttributes"})}),(0,r.jsx)(s.td,{children:"ImageAttributes"}),(0,r.jsx)(s.td,{children:"Extracted attributes of the asset."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"lqip"})}),(0,r.jsx)(s.td,{children:"LQIP"}),(0,r.jsx)(s.td,{children:"Low-Quality Image Placeholder (LQIP) values if enabled in path configuration"})]})]})]})]})}function o(e={}){const{wrapper:s}={...(0,d.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453:(e,s,t)=>{t.d(s,{R:()=>i,x:()=>l});var n=t(6540);const r={},d=n.createContext(r);function i(e){const s=n.useContext(d);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),n.createElement(d.Provider,{value:s},e.children)}}}]);