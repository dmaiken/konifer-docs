"use strict";(globalThis.webpackChunkkonifer_docs=globalThis.webpackChunkkonifer_docs||[]).push([[924],{6475:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"getting-started","title":"Getting Started with Konifer","description":"Docker","source":"@site/docs/getting-started.md","sourceDirName":".","slug":"/getting-started","permalink":"/konifer-docs/getting-started","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"id":"getting-started","title":"Getting Started with Konifer","sidebar_label":"Getting Started"},"sidebar":"docsSidebar","previous":{"title":"Introduction","permalink":"/konifer-docs/"},"next":{"title":"Architecture","permalink":"/konifer-docs/Concepts/concepts-architecture"}}');var i=t(4848),s=t(8453);const a={sidebar_position:2,id:"getting-started",title:"Getting Started with Konifer",sidebar_label:"Getting Started"},o=void 0,l={},c=[{value:"Docker",id:"docker",level:2},{value:"Requirements",id:"requirements",level:2},{value:"Development mode",id:"development-mode",level:2},{value:"Running Konifer Container",id:"running-konifer-container",level:2},{value:"Store an Asset",id:"store-an-asset",level:2},{value:"Fetch a Variant",id:"fetch-a-variant",level:2},{value:"Generate Variants",id:"generate-variants",level:3},{value:"Sepia Example",id:"sepia-example",level:4},{value:"Blur Example",id:"blur-example",level:4},{value:"Fetch Redirect",id:"fetch-redirect",level:3},{value:"Metadata",id:"metadata",level:3},{value:"Labels and Tags",id:"labels-and-tags",level:2},{value:"Libvips",id:"libvips",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"docker",children:"Docker"}),"\n",(0,i.jsx)(n.p,{children:"Konifer is deployed exclusively via Docker. Due to the precise configuration required for the underlying libvips binary,\nwe do not provide standalone JARs or binary releases."}),"\n",(0,i.jsx)(n.h2,{id:"requirements",children:"Requirements"}),"\n",(0,i.jsx)(n.p,{children:"Konifer requires the following to start:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Container Runtime:"})," A functional installation of Docker or any OCI-compatible runtime"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Database:"})," A running database instance, such as PostgreSQL (required for production use or depending on the specified configuration)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Object Store:"})," Access to an S3 API-compatible object store (e.g., AWS S3, Cloudflare R2, MinIO, etc.).\nThe filesystem is also a supported option as long as it can be mounted to container at runtime."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Configuration:"})," A configuration file named ",(0,i.jsx)(n.code,{children:"konifer.conf"})," using HOCON syntax."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["HOCON is not as scary as it sounds. It is a superset of JSON and there is a ",(0,i.jsx)(n.a,{href:"/konifer-docs/Reference/configuration-reference",children:"complete reference"}),"\nof all properties used within Konifer. Do not be afraid!"]})}),"\n",(0,i.jsx)(n.h2,{id:"development-mode",children:"Development mode"}),"\n",(0,i.jsx)(n.p,{children:"Konifer can start up using an in-memory object store and/or metadata store for development use. In-memory configuration\nis NOT recommended for production use since anything stored in-memory is ephemeral and could result in excessive memory usage."}),"\n",(0,i.jsx)(n.h2,{id:"running-konifer-container",children:"Running Konifer Container"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Create a ",(0,i.jsx)(n.code,{children:"konifer.conf"})," file and enable in-memory storage modes."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-hocon",children:"data-store {\n  provider = in-memory\n}\n\nobject-store {\n  provider = in-memory\n}\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Run the container, exposing the service on port 8080 (or any port you want) using this command:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run -d \\\n  --name konifer \\\n  -p 8080:8080 \\\n  -v /path/to/your/konifer.conf:/app/config/konifer.conf \\\n  ghcr.io/dmaiken/konifer:0.1.0\n"})}),"\n",(0,i.jsx)(n.h2,{id:"store-an-asset",children:"Store an Asset"}),"\n",(0,i.jsx)(n.p,{children:"Use this curl (Insomnia/Bruno examples coming!) to store your first asset."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl --request POST \\\n  --url 'http://localhost:8080/assets/my-images/' \\\n  --header 'Content-Type: multipart/form-data' \\\n  --form 'metadata={\"alt\":\"moon\"}' \\\n  --form file=/path/to/your/image.png\n"})}),"\n",(0,i.jsx)(n.h2,{id:"fetch-a-variant",children:"Fetch a Variant"}),"\n",(0,i.jsx)(n.p,{children:"Use this curl to fetch the content of your asset"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl --request GET \\\n  --url 'http://localhost:8080/assets/my-images/-/content' \\\n"})}),"\n",(0,i.jsx)(n.h3,{id:"generate-variants",children:"Generate Variants"}),"\n",(0,i.jsx)(n.p,{children:"Requesting a variant will generate and store the variant on-demand if one does not exist already."}),"\n",(0,i.jsx)(n.h4,{id:"sepia-example",children:"Sepia Example"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl --request GET \\\n  --url 'http://localhost:8080/assets/my-images/-/content?filter=sepia' \\\n"})}),"\n",(0,i.jsx)(n.h4,{id:"blur-example",children:"Blur Example"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl --request GET \\\n  --url 'http://localhost:8080/assets/my-images/-/content?blur=100' \\\n"})}),"\n",(0,i.jsx)(n.h3,{id:"fetch-redirect",children:"Fetch Redirect"}),"\n",(0,i.jsx)(n.p,{children:"Fetch your variant as a redirect to your CDN."}),"\n",(0,i.jsxs)(n.p,{children:["Add this to ",(0,i.jsx)(n.code,{children:"konifer.conf"})," and restart your container:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-hocon",children:'paths = [\n  {\n    path = "/**"\n    return-format {\n      redirect {\n        strategy = template\n        template {\n          string = "https://mycdn.com/{bucket}/{key}"\n        }\n      }\n    }\n  }\n]\n'})}),"\n",(0,i.jsx)(n.p,{children:"Now specify the redirect selector:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl --request GET \\\n  --url 'http://localhost:8080/assets/my-images/-/redirect?blur=100' \\\n"})}),"\n",(0,i.jsx)(n.h3,{id:"metadata",children:"Metadata"}),"\n",(0,i.jsx)(n.p,{children:"View metadata of the asset as well."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl --request GET \\\n  --url 'http://localhost:8080/assets/my-images/-/metadata' \\\n"})}),"\n",(0,i.jsx)(n.h2,{id:"labels-and-tags",children:"Labels and Tags"}),"\n",(0,i.jsx)(n.p,{children:"Update the asset to add labels and tags using PUT."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl --request PUT \\\n  --url http://localhost:8080/assets/my-images/-/entry/0 \\\n  --header \'Content-Type: application/json\' \\\n  --data \'{\n\t"alt": "a friendly alt",\n\t"labels": {\n\t\t"phone": "iphone",\n\t\t"signedAt": "2026-01-01",\n\t\t"koniferIsAwesome": "true"\n\t},\n\t"tags": [\n\t\t"hot", "innovative", "productionReady"\n\t]\n}\n\'\n'})}),"\n",(0,i.jsx)(n.h2,{id:"libvips",children:"Libvips"}),"\n",(0,i.jsxs)(n.p,{children:["Konifer's container comes with an installation of ",(0,i.jsx)(n.a,{href:"https://www.libvips.org/",children:"libvips"})," optimized for use with Konifer. Optimal hardware configuration\nis dependent on your specific use-case, but libvips generally exhibits near-linear scaling with respect to available\nCPU cores and performance benefits significantly from increased memory."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var r=t(6540);const i={},s=r.createContext(i);function a(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);