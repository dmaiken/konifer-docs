"use strict";(globalThis.webpackChunkkonifer_docs=globalThis.webpackChunkkonifer_docs||[]).push([[712],{936:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"Concepts/Variants/concepts-variants","title":"Introduction","description":"A Variant represents a specific, transformed version of the asset\'s content. It is generated using the","source":"@site/docs/Concepts/Variants/intro.md","sourceDirName":"Concepts/Variants","slug":"/Concepts/Variants/concepts-variants","permalink":"/konifer-docs/Concepts/Variants/concepts-variants","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"id":"concepts-variants","title":"Introduction","sidebar_label":"Introduction"},"sidebar":"docsSidebar","previous":{"title":"Deleting","permalink":"/konifer-docs/Concepts/Assets/concepts-deleting-assets"},"next":{"title":"Profiles","permalink":"/konifer-docs/Concepts/Variants/concepts-variant-profiles"}}');var r=t(4848),a=t(8453);const s={sidebar_position:1,id:"concepts-variants",title:"Introduction",sidebar_label:"Introduction"},o=void 0,d={},c=[{value:"Original Variant",id:"original-variant",level:2},{value:"Eager Variant Generation",id:"eager-variant-generation",level:2},{value:"Best-effort",id:"best-effort",level:3},{value:"Configuration",id:"configuration",level:3},{value:"On-demand Variant Generation",id:"on-demand-variant-generation",level:2}];function l(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"A Variant represents a specific, transformed version of the asset's content. It is generated using the\ntransformation options available within Konifer (e.g., resizing, cropping, format change)."}),"\n",(0,r.jsx)(n.p,{children:"A variant is composed of:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Attributes"}),": Properties of the variant, such as its ",(0,r.jsx)(n.code,{children:"height"}),", ",(0,r.jsx)(n.code,{children:"width"}),", and ",(0,r.jsx)(n.code,{children:"mimeType"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Transformation"}),": The specific operations applied to the ",(0,r.jsx)(n.strong,{children:"Original Variant"})," to create ",(0,r.jsx)(n.em,{children:"this"})," variant\n(e.g., ",(0,r.jsx)(n.code,{children:"rotate: 90"}),", ",(0,r.jsx)(n.code,{children:"blur: 2"}),")."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"original-variant",children:"Original Variant"}),"\n",(0,r.jsxs)(n.p,{children:["The Original Variant is the physical representation of the asset content supplied during the Store Assets request.\n",(0,r.jsxs)(n.strong,{children:["All other variants for this asset are transformed ",(0,r.jsx)(n.em,{children:"from"})," the Original Variant."]})]}),"\n",(0,r.jsxs)(n.p,{children:["Only pre-processing defined in your configuration (e.g., applying a global ",(0,r.jsx)(n.code,{children:"max-width"})," limit or file format conversion)\ncan transform the supplied content into the Original Variant. If no pre-processing is configured or applied, the\nOriginal Variant is the exact representation of the supplied content."]}),"\n",(0,r.jsx)(n.h1,{id:"variant-types",children:"Variant Types"}),"\n",(0,r.jsx)(n.p,{children:"Variants can be generated in 2 different ways (in addition to Ingest Transformations):"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Eager variant generation"}),"\n",(0,r.jsx)(n.li,{children:"On-demand variant generation"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"eager-variant-generation",children:"Eager Variant Generation"}),"\n",(0,r.jsx)(n.p,{children:"You may know which variants you need at the time you store the asset. Eager variants are generated at the time of upload,\nhowever, the generation is asynchronous and best-effort. The Store Asset API will return before eager variants are\ngenerated, however, a background process to generate them is kicked off at the time of upload."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Important"}),": Eager variants ",(0,r.jsx)(n.em,{children:"must"})," be defined using variant profiles."]}),"\n",(0,r.jsx)(n.h3,{id:"best-effort",children:"Best-effort"}),"\n",(0,r.jsx)(n.p,{children:"Eager variants are generated on a best-effort basis. If your Konifer instance is killed or the variant fails to generate\nfor any reason, it will not be rescheduled. When you request the variant, it will instead be generated on-demand."}),"\n",(0,r.jsx)(n.h3,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsx)(n.p,{children:"Eager variants are defined in your path configuration. The following configuration will generate two different variants."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-hocon",children:'variant-profiles = [\n  {\n    name = small\n    h = 50\n    w = 50\n    fit = cover\n    mimeType = "image/png"\n  },\n  {\n    name = medium\n    h = 100\n    w = 100\n    fit = cover\n    mimeType = "image/png"\n  }\n]\n\npaths = [\n  {\n    path = "/users/**"\n    eager-variants = [\n      small,\n      medium\n    ]\n  }\n]\n'})}),"\n",(0,r.jsx)(n.h2,{id:"on-demand-variant-generation",children:"On-demand Variant Generation"}),"\n",(0,r.jsxs)(n.p,{children:["Whenever the Fetch Asset API is invoked and manipulation arguments are supplied (e.g. ",(0,r.jsx)(n.code,{children:"w"}),", ",(0,r.jsx)(n.code,{children:"h"}),", ",(0,r.jsx)(n.code,{children:"g"}),", etc), a variant\nis generated from the Original Variant on-demand. The variant is also cached in your configured object store."]}),"\n",(0,r.jsx)(n.h1,{id:"variant-caching",children:"Variant Caching"}),"\n",(0,r.jsx)(n.p,{children:"When variants are generated eagerly or on-demand, they are cached in your object store. If a cached variant matching\nyour request exists, it is returned. If not, the variant is generated and persisted in your object store."}),"\n",(0,r.jsx)(n.p,{children:"Sometimes, the different parameters result in the same variant. For example, these two requests generate the same variant:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:"GET /assets/users/123/profile-picture?f=h&r=180\n"})}),"\n",(0,r.jsx)(n.p,{children:"and"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:"GET /assets/users/123/profile-picture?f=v\n"})}),"\n",(0,r.jsx)(n.p,{children:"The first requests a variant that is horizontally-flipped and rotated 180 degrees. The second requests a variant that\nis vertically-flipped. Konifer is intelligent enough to know the resulting variant is the same."}),"\n",(0,r.jsx)(n.h1,{id:"deleting-your-asset",children:"Deleting your Asset"}),"\n",(0,r.jsx)(n.p,{children:"Deleting your asset results in all variants belonging to the asset also being deleted."})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>o});var i=t(6540);const r={},a=i.createContext(r);function s(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);