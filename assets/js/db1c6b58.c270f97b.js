"use strict";(globalThis.webpackChunkkonifer_docs=globalThis.webpackChunkkonifer_docs||[]).push([[210],{1506:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"Concepts/Assets/concepts-updating-assets","title":"Updating Assets","description":"Asset content is considered immutable. This is done to simplify HTTP cache semantics. You cannot change an asset\'s","source":"@site/docs/Concepts/Assets/updating-assets.md","sourceDirName":"Concepts/Assets","slug":"/Concepts/Assets/concepts-updating-assets","permalink":"/konifer-docs/Concepts/Assets/concepts-updating-assets","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"id":"concepts-updating-assets","title":"Updating Assets","sidebar_label":"Updating"},"sidebar":"docsSidebar","previous":{"title":"Fetching","permalink":"/konifer-docs/Concepts/Assets/concepts-fetching-assets"},"next":{"title":"Deleting","permalink":"/konifer-docs/Concepts/Assets/concepts-deleting-assets"}}');var a=s(4848),i=s(8453);const o={sidebar_position:4,id:"concepts-updating-assets",title:"Updating Assets",sidebar_label:"Updating"},c=void 0,d={},l=[{value:"Updating asset metadata",id:"updating-asset-metadata",level:2},{value:"Cache-Control",id:"cache-control",level:2}];function r(e){const t={admonition:"admonition",code:"code",em:"em",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(t.p,{children:["Asset content is considered immutable. This is done to simplify HTTP cache semantics. You ",(0,a.jsx)(t.strong,{children:"cannot"})," change an asset's\ncontent at a given ",(0,a.jsx)(t.code,{children:"entryId"}),". Depending on how you use the ",(0,a.jsx)(t.code,{children:"entryId"}),", you have a few options:"]}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsx)(t.li,{children:'To truly "replace" the asset, you can delete the asset and then upload a new one'}),"\n",(0,a.jsxs)(t.li,{children:["If using the ",(0,a.jsx)(t.code,{children:"entryId"})," as a versioning mechanism, you can simply POST the new asset to the path. Doing so will let you\nfetch the newest asset by default when calling ",(0,a.jsx)(t.code,{children:"GET /assets/your/path"})," since the default ordering modifier is ",(0,a.jsx)(t.code,{children:"created"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(t.p,{children:["Asset metadata ",(0,a.jsx)(t.em,{children:"can"})," be updated, however. This includes:"]}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.code,{children:"alt"})}),"\n",(0,a.jsx)(t.li,{children:"Labels"}),"\n",(0,a.jsx)(t.li,{children:"Tags"}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"updating-asset-metadata",children:"Updating asset metadata"}),"\n",(0,a.jsxs)(t.p,{children:["To update asset metadata, you must ",(0,a.jsx)(t.code,{children:"PUT"})," to the asset using the ",(0,a.jsx)(t.code,{children:"entryId"}),". Relative selectors such as order are not allowed.\n",(0,a.jsx)(t.code,{children:"PUT /assets"})," follows RESTful PUT semantics. The entire metadata payload must be supplied and all fields will be overwritten."]}),"\n",(0,a.jsx)(t.admonition,{type:"warning",children:(0,a.jsx)(t.p,{children:"PUT is a complete replacement of the asset metadata. Even if updating one field, the rest of the fields\nmust be supplied or they will be erased."})}),"\n",(0,a.jsx)(t.p,{children:"To update the metadata of an asset:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-http",children:'PUT /assets/users/123/-/entry/0\nContent-Type: application/json\n\n{\n  "alt": "Profile Picture",\n  "tags": ["headshot", "team"],\n  "labels": {\n    "department": "engineering"\n  }\n}\n'})}),"\n",(0,a.jsx)(t.h2,{id:"cache-control",children:"Cache-Control"}),"\n",(0,a.jsx)(t.p,{children:"Updating metadata will automatically change the asset's ETag."}),"\n",(0,a.jsxs)(t.p,{children:["Even though the binary content has not changed, the ETag must rotate because metadata fields like ",(0,a.jsx)(t.code,{children:"alt"})," are often served\nalongside the content (e.g., in the Konifer-Alt header). Rotating the ETag ensures that CDNs and browsers re-fetch the\nasset to receive the updated accessibility information."]})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(r,{...e})}):r(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>o,x:()=>c});var n=s(6540);const a={},i=n.createContext(a);function o(e){const t=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);