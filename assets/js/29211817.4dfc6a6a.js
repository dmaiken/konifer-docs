"use strict";(globalThis.webpackChunkkonifer_docs=globalThis.webpackChunkkonifer_docs||[]).push([[164],{7174:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"Concepts/Assets/concepts-fetching-assets","title":"Fetching Assets","description":"After an asset is stored, it can be fetched. Konifer offers powerful options to fetch your asset in a variety of ways using","source":"@site/docs/Concepts/Assets/fetching-assets.md","sourceDirName":"Concepts/Assets","slug":"/Concepts/Assets/concepts-fetching-assets","permalink":"/konifer-docs/Concepts/Assets/concepts-fetching-assets","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"id":"concepts-fetching-assets","title":"Fetching Assets","sidebar_label":"Fetching"},"sidebar":"docsSidebar","previous":{"title":"Storing","permalink":"/konifer-docs/Concepts/Assets/concepts-storing-assets"},"next":{"title":"Updating","permalink":"/konifer-docs/Concepts/Assets/concepts-updating-assets"}}');var r=n(4848),i=n(8453);const d={sidebar_position:3,id:"concepts-fetching-assets",title:"Fetching Assets",sidebar_label:"Fetching"},c="Overview",a={},l=[{value:"Query Selectors",id:"query-selectors",level:2},{value:"Defaults",id:"defaults",level:3},{value:"Return format",id:"return-format",level:2},{value:"<code>link</code> (default)",id:"link-default",level:3},{value:"Asset Link Response",id:"asset-link-response",level:4},{value:"<code>content</code>",id:"content",level:3},{value:"<code>download</code>",id:"download",level:3},{value:"<code>redirect</code>",id:"redirect",level:3},{value:"<code>metadata</code>",id:"metadata",level:3},{value:"Asset Metadata Response",id:"asset-metadata-response",level:4},{value:"Ordering",id:"ordering",level:2},{value:"Limit",id:"limit",level:2},{value:"Entry ID",id:"entry-id",level:3}];function o(e){const s={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"overview",children:"Overview"})}),"\n",(0,r.jsx)(s.p,{children:"After an asset is stored, it can be fetched. Konifer offers powerful options to fetch your asset in a variety of ways using\nquery modifiers."}),"\n",(0,r.jsx)(s.h2,{id:"query-selectors",children:"Query Selectors"}),"\n",(0,r.jsxs)(s.p,{children:["Query selectors are positional values specified after the path-separator, ",(0,r.jsx)(s.code,{children:"/-/"}),". They are used to control the format\nand ordering of fetched assets."]}),"\n",(0,r.jsx)(s.h3,{id:"defaults",children:"Defaults"}),"\n",(0,r.jsx)(s.p,{children:"The following are the default values and can be omitted as modifiers:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["return_format: ",(0,r.jsx)(s.code,{children:"link"})]}),"\n",(0,r.jsxs)(s.li,{children:["ordering: ",(0,r.jsx)(s.code,{children:"created"})]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"So this:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-http",children:"GET /assets/users/123/profile-picture\n"})}),"\n",(0,r.jsx)(s.p,{children:"Is the same as:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-http",children:"GET /assets/users/123/profile-picture/-/link/created/\n"})}),"\n",(0,r.jsx)(s.p,{children:"Any default can be omitted for brevity"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-http",children:"GET /assets/users/123/profile-picture/-/metadata/created\n"})}),"\n",(0,r.jsx)(s.p,{children:"is the same as:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-http",children:"GET /assets/users/123/profile-picture/-/metadata\n"})}),"\n",(0,r.jsx)(s.h2,{id:"return-format",children:"Return format"}),"\n",(0,r.jsx)(s.p,{children:"You can return your asset in one of five different return formats:"}),"\n",(0,r.jsxs)(s.h3,{id:"link-default",children:[(0,r.jsx)(s.code,{children:"link"})," (default)"]}),"\n",(0,r.jsx)(s.p,{children:"Returns a link to the asset in your object store. If you have any LQIPs enabled, these are returned as well."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-http",children:"GET /assets/users/123/profile-picture/-/link\n"})}),"\n",(0,r.jsx)(s.p,{children:"Returns:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'{\n  "url": "https://assets.s3.us-east-2.amazonaws.com/d905170f-defd-47e4-b606-d01993ba7b42",\n  "lqip": { // Empty if LQIPs are disabled\n    "blurhash": "BASE64",\n    "thumbhash": "BASE64"\n  },\n  "alt": "Your alt"\n}\n'})}),"\n",(0,r.jsx)(s.h4,{id:"asset-link-response",children:"Asset Link Response"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Field Name"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"url"})}),(0,r.jsx)(s.td,{children:"String"}),(0,r.jsx)(s.td,{children:"The S3 URL of the requested variant - can be path or virtual-host style depending on configuration"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"lqip"})}),(0,r.jsx)(s.td,{children:"LQIP"}),(0,r.jsx)(s.td,{children:"Low-Quality Image Placeholder (LQIP) values if enabled in path configuration"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"alt"})}),(0,r.jsx)(s.td,{children:"String"}),(0,r.jsxs)(s.td,{children:["The ",(0,r.jsx)(s.code,{children:"alt"})," supplied when storing the asset"]})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"content",children:(0,r.jsx)(s.code,{children:"content"})}),"\n",(0,r.jsx)(s.p,{children:"Typically used when you want Konifer to apply transformations (e.g., resizing) and stream the result without\nexposing the underlying S3 URL."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-http",children:"GET /assets/users/123/profile-picture/-/content\n"})}),"\n",(0,r.jsx)(s.p,{children:"Returns:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-http",children:'HTTP/1.1 200 OK\nContent-Type: image/jpeg\nContent-Length: 45123\nK-Alt: "Your defined alt, if any"\n'})}),"\n",(0,r.jsx)(s.h3,{id:"download",children:(0,r.jsx)(s.code,{children:"download"})}),"\n",(0,r.jsxs)(s.p,{children:["Similar to ",(0,r.jsx)(s.code,{children:"content"})," but sets the ",(0,r.jsx)(s.code,{children:"Content-Disposition"}),' header so that the asset triggers a "Save As" dialog in a browser.']}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-http",children:"GET /assets/users/123/profile-picture/-/download\n"})}),"\n",(0,r.jsx)(s.p,{children:"Returns:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-http",children:'HTTP/1.1 200 OK\nContent-Type: image/jpeg\nContent-Length: 45123\nContent-Disposition: attachment; filename="profile-picture.jpeg"\n'})}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsxs)(s.p,{children:["Note: the ",(0,r.jsx)(s.code,{children:"filename"})," in the ",(0,r.jsx)(s.code,{children:"Content-Dipsosition"})," headers will be the ",(0,r.jsx)(s.code,{children:"alt"})," if supplied, or else the path."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"redirect",children:(0,r.jsx)(s.code,{children:"redirect"})}),"\n",(0,r.jsx)(s.p,{children:"A redirect (307) to the object store URL"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-http",children:"GET /assets/users/123/profile-picture/-/redirect\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Returns a ",(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.code,{children:"Temporary Redirect 307"})}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-http",children:"Code: 307\nLocation: https://assets.s3.us-east-2.amazonaws.com/d905170f-defd-47e4-b606-d01993ba7b42\n"})}),"\n",(0,r.jsx)(s.h3,{id:"metadata",children:(0,r.jsx)(s.code,{children:"metadata"})}),"\n",(0,r.jsx)(s.p,{children:"A json response of the image and it's properties, cached variants, and image attributes."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-http",children:"GET /assets/users/123/profile-picture/-/metadata\n"})}),"\n",(0,r.jsx)(s.p,{children:"Returns:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'{\n  "class": "IMAGE",\n  "alt": "The alt text for an image",\n  "entryId": 1049, // Unique identifier scoped to the path\n  "labels": {\n    "label-key": "label-value",\n    "phone": "Android"\n  },\n  "tags": [ "cold", "verified" ],\n  "source": "URL", // or UPLOAD if using multipart upload\n  "sourceUrl": "https://yoururl.com/image.jpeg",\n  "variants": [\n    {\n      "bucket": "assets", // Defined in configuration\n      "storeKey": "d905170f-defd-47e4-b606-d01993ba7b42", // Generated by Konifer\n      "imageAttributes": {\n        "height": 100,\n        "width": 200,\n        "mimeType": "image/jpeg"\n      },\n      "lqip": { // Empty if LQIPs are disabled\n        "blurhash": "BASE64",\n        "thumbhash": "BASE64"\n      }\n    }\n  ],\n  "createdAt": "2025-11-12T01:20:55" // ISO 8601\n}\n'})}),"\n",(0,r.jsx)(s.h4,{id:"asset-metadata-response",children:"Asset Metadata Response"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Field Name"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"class"})}),(0,r.jsx)(s.td,{children:"String"}),(0,r.jsxs)(s.td,{children:["The type of the asset, currently always ",(0,r.jsx)(s.code,{children:"IMAGE"})]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"alt"})}),(0,r.jsx)(s.td,{children:"String"}),(0,r.jsx)(s.td,{children:"The supplied alt text of your asset"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"entryId"})}),(0,r.jsx)(s.td,{children:"Long"}),(0,r.jsx)(s.td,{children:"System-generated unique identifier of asset within path"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"labels"})}),(0,r.jsx)(s.td,{children:"Object"}),(0,r.jsx)(s.td,{children:"Supplied key-value pairs associated with the asset"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"tags"})}),(0,r.jsx)(s.td,{children:"Array"}),(0,r.jsx)(s.td,{children:"Supplied attributes associated with the asset"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"source"})}),(0,r.jsx)(s.td,{children:"String"}),(0,r.jsxs)(s.td,{children:["Either ",(0,r.jsx)(s.code,{children:"URL"})," or ",(0,r.jsx)(s.code,{children:"UPLOAD"})," depending on how you provided asset content"]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"sourceUrl"})}),(0,r.jsx)(s.td,{children:"String"}),(0,r.jsx)(s.td,{children:"If URL source was used, then this is the supplied URL"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"variants"})}),(0,r.jsx)(s.td,{children:"AssetVariant"}),(0,r.jsx)(s.td,{children:"Will only contain the original variant - the one supplied"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"createdAt"})}),(0,r.jsx)(s.td,{children:"ISO 8601"}),(0,r.jsx)(s.td,{children:"Date asset was stored"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"modifiedAt"})}),(0,r.jsx)(s.td,{children:"ISO 8601"}),(0,r.jsx)(s.td,{children:"Date asset was last modified"})]})]})]}),"\n",(0,r.jsx)(s.h2,{id:"ordering",children:"Ordering"}),"\n",(0,r.jsxs)(s.p,{children:["When fetching a single asset or multiple assets, you can specify an ordering. Currently only ",(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.code,{children:"created"})})," is supported,\nmeaning the asset(s) are returned in the order of creation, ",(0,r.jsx)(s.strong,{children:"descending (newest first)"}),". Using ",(0,r.jsx)(s.code,{children:"created"})," means each\npath operates like a stack where the newest image is returned first."]}),"\n",(0,r.jsx)(s.p,{children:"To specify an ordering place it after the return format option:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-http",children:"GET /assets/users/123/profile-picture/-/redirect/created\n"})}),"\n",(0,r.jsxs)(s.p,{children:["This also works if you are wanting the ",(0,r.jsx)(s.code,{children:"link"})," of the newest asset in the path since ",(0,r.jsx)(s.code,{children:"link"})," is the default return format:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-http",children:"GET /assets/users/123/profile-picture/-/created\n"})}),"\n",(0,r.jsxs)(s.p,{children:["TODO: support ",(0,r.jsx)(s.code,{children:"!created"})," and ",(0,r.jsx)(s.code,{children:"modified"}),"."]}),"\n",(0,r.jsx)(s.h2,{id:"limit",children:"Limit"}),"\n",(0,r.jsxs)(s.p,{children:["For ",(0,r.jsx)(s.code,{children:"metadata"})," return formats, you can return more than one.  To return the 3 most-recent assets, specify the ",(0,r.jsx)(s.code,{children:"limit"})," query\nparameter, or ",(0,r.jsx)(s.code,{children:"-1"})," for all assets within the path:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-http",children:"GET /assets/users/123/profile-picture/-/link/created?limit=3\n"})}),"\n",(0,r.jsx)(s.h3,{id:"entry-id",children:"Entry ID"}),"\n",(0,r.jsxs)(s.p,{children:["When an asset is stored within your path, it is assigned a unique ",(0,r.jsx)(s.code,{children:"entryId"}),". This ID is an absolute reference to the asset\nwithin your path. It is guaranteed to be unique relative to the path. Assets can be fetched by their path + ",(0,r.jsx)(s.code,{children:"entryId"}),"\nusing the ",(0,r.jsx)(s.code,{children:"entry"})," Query Modifier."]}),"\n",(0,r.jsxs)(s.p,{children:["To fetch a specific asset (",(0,r.jsx)(s.code,{children:"entryId"})," of 42) using the default ",(0,r.jsx)(s.code,{children:"link"})," return format:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-http",children:"GET /assets/users/123/profile-picture/-/entry/42\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Additionally, you can specify the return format along with the ",(0,r.jsx)(s.code,{children:"entryId"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-http",children:"GET /assets/users/123/profile-picture/-/entry/42/redirect\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Ordering query selectors ",(0,r.jsx)(s.strong,{children:"cannot"})," be used with the ",(0,r.jsx)(s.code,{children:"entry"})," modifier."]})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>d,x:()=>c});var t=n(6540);const r={},i=t.createContext(r);function d(e){const s=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),t.createElement(i.Provider,{value:s},e.children)}}}]);