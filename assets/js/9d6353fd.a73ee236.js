"use strict";(globalThis.webpackChunkkonifer_docs=globalThis.webpackChunkkonifer_docs||[]).push([[883],{8453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>c});var l=n(6540);const s={},r=l.createContext(s);function i(e){const t=l.useContext(r);return l.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),l.createElement(r.Provider,{value:t},e.children)}},9314:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>o});const l=JSON.parse('{"id":"Reference/http-caching","title":"HTTP Caching","description":"Konifer exposes highly-customizable Cache-Control headers. Due to the relative nature of the API, no assumptions are made","source":"@site/docs/Reference/http-caching.md","sourceDirName":"Reference","slug":"/Reference/http-caching","permalink":"/konifer-docs/Reference/http-caching","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"id":"http-caching","title":"HTTP Caching","sidebar_label":"HTTP Caching"},"sidebar":"docsSidebar","previous":{"title":"Storing Assets","permalink":"/konifer-docs/Reference/reference-variant-storage"},"next":{"title":"URL Signing","permalink":"/konifer-docs/Reference/url-signing"}}');var s=n(4848),r=n(8453);const i={sidebar_position:5,id:"http-caching",title:"HTTP Caching",sidebar_label:"HTTP Caching"},c=void 0,d={},o=[{value:"Cache-Control Configuration",id:"cache-control-configuration",level:2},{value:"Usage",id:"usage",level:3},{value:"Etags",id:"etags",level:2}];function a(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.p,{children:["Konifer exposes highly-customizable ",(0,s.jsx)(t.code,{children:"Cache-Control"})," headers. Due to the relative nature of the API, no assumptions are made\nregarding the appropriate ",(0,s.jsx)(t.code,{children:"Cache-Control"})," header to apply to an asset."]}),"\n",(0,s.jsx)(t.h2,{id:"cache-control-configuration",children:"Cache-Control Configuration"}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"Cache-Control"})," header can be configured per-path. The following options are available:"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Property"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Description"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Allowed Input"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Default"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"enabled"})}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["Whether the ",(0,s.jsx)(t.code,{children:"Cache-Control"})," header should be returned"]}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Boolean"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"false"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"max-age"})}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["Set the ",(0,s.jsx)(t.code,{children:"max-age"})," descriptor"]}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["Integer ",(0,s.jsx)(t.code,{children:"> 0"})]}),(0,s.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"s-maxage"})}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["Set the ",(0,s.jsx)(t.code,{children:"max-age"})," descriptor"]}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["Integer ",(0,s.jsx)(t.code,{children:"> 0"})]}),(0,s.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"visibility"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Set the visbility of the cached asset"}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,s.jsx)(t.code,{children:"public"}),", ",(0,s.jsx)(t.code,{children:"private"})]}),(0,s.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"revalidate"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Cache control revalidation"}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,s.jsx)(t.code,{children:"must-revalidate"}),", ",(0,s.jsx)(t.code,{children:"proxy-revalidate"}),", ",(0,s.jsx)(t.code,{children:"no-cache"})]}),(0,s.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"stale-while-revalidate "})}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["Set the ",(0,s.jsx)(t.code,{children:"stale-while-revalidate"})," descriptor"]}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["Integer ",(0,s.jsx)(t.code,{children:"> 0"})]}),(0,s.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"stale-if-error "})}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["Set the ",(0,s.jsx)(t.code,{children:"stale-if-error"})," descriptor"]}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["Integer ",(0,s.jsx)(t.code,{children:"> 0"})]}),(0,s.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"immutable"})}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["Whether to set the ",(0,s.jsx)(t.code,{children:"immutable"})," descriptor"]}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Boolean"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"false"})})]})]})]}),"\n",(0,s.jsx)(t.admonition,{type:"caution",children:(0,s.jsxs)(t.p,{children:["Konifer does ",(0,s.jsx)(t.strong,{children:"not"})," validate proper semantic ",(0,s.jsx)(t.code,{children:"Cache-Control"})," configurations."]})}),"\n",(0,s.jsx)(t.h3,{id:"usage",children:"Usage"}),"\n",(0,s.jsxs)(t.p,{children:["To configure, specify properties within the ",(0,s.jsx)(t.code,{children:"cache-control"})," block of your path configuration. You can explore more about the proper\nusage of ",(0,s.jsx)(t.code,{children:"Cache-Control"})," header directives ",(0,s.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Cache-Control",children:"here"}),"."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-hocon",children:'{\n  paths = [\n    {\n      path = "/users"\n      cache-control {\n        enabled = true\n        max-age = 1000000\n        s-maxage = 2000000\n        immutable = true\n      }\n    }\n  ]\n}\n'})}),"\n",(0,s.jsx)(t.h2,{id:"etags",children:"Etags"}),"\n",(0,s.jsxs)(t.p,{children:["Etags are always enabled and are returned regardless of your ",(0,s.jsx)(t.code,{children:"cache-control"})," configuration. ",(0,s.jsx)(t.code,{children:"Etags"})," and conditional\nvalidation are only enabled when returning asset in the ",(0,s.jsx)(t.code,{children:"content"})," return format. The usage of ",(0,s.jsx)(t.code,{children:"Etags"})," is outside of the scope\nof this document and can be explored further ",(0,s.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/ETag",children:"here"}),"."]})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}}}]);