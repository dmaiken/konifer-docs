"use strict";(globalThis.webpackChunkkonifer_docs=globalThis.webpackChunkkonifer_docs||[]).push([[711],{8453:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>i});var t=n(6540);const l={},a=t.createContext(l);function r(e){const s=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),t.createElement(a.Provider,{value:s},e.children)}},9497:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>i,default:()=>o,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"Concepts/Assets/concepts-assets","title":"Introduction","description":"An asset is the fundamental resource that Konifer manages. An asset is composed of two elements, metadata and content.","source":"@site/docs/Concepts/Assets/intro.md","sourceDirName":"Concepts/Assets","slug":"/Concepts/Assets/concepts-assets","permalink":"/Concepts/Assets/concepts-assets","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"id":"concepts-assets","title":"Introduction","sidebar_label":"Introduction"},"sidebar":"docsSidebar","previous":{"title":"LQIPs","permalink":"/Concepts/concepts-lqip"},"next":{"title":"Storing","permalink":"/Concepts/Assets/concepts-storing-assets"}}');var l=n(4848),a=n(8453);const r={sidebar_position:1,id:"concepts-assets",title:"Introduction",sidebar_label:"Introduction"},i="Overview",d={},c=[{value:"API",id:"api",level:2},{value:"Content",id:"content",level:2},{value:"Metadata",id:"metadata",level:2},{value:"Alt",id:"alt",level:2},{value:"Labels",id:"labels",level:2},{value:"Querying",id:"querying",level:3},{value:"Deleting",id:"deleting",level:3},{value:"Delete all with label(s)",id:"delete-all-with-labels",level:4},{value:"Recursive delete",id:"recursive-delete",level:4},{value:"Reserved words",id:"reserved-words",level:3},{value:"Rules",id:"rules",level:3},{value:"Tags",id:"tags",level:2},{value:"Rules",id:"rules-1",level:3}];function h(e){const s={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.header,{children:(0,l.jsx)(s.h1,{id:"overview",children:"Overview"})}),"\n",(0,l.jsx)(s.p,{children:"An asset is the fundamental resource that Konifer manages. An asset is composed of two elements, metadata and content.\nMetadata is stored in Postgres and content is stored in the configured object store (S3, filesystem, or in-memory)."}),"\n",(0,l.jsx)(s.p,{children:"Assets can be created, fetched, and their metadata updated. Content is not updatable since, for caching purposes, an\nasset's content is considered immutable."}),"\n",(0,l.jsx)(s.h2,{id:"api",children:"API"}),"\n",(0,l.jsxs)(s.p,{children:["An asset is created by calling ",(0,l.jsx)(s.code,{children:"POST:/assets/{your/defined/path}"}),". This way, ",(0,l.jsx)(s.em,{children:"you"})," define the domain structure\nof the platform. For example, if your assets are primarily user-generated content, you may want to organize your API around\nyour users."]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-http",children:"POST /assets/users/123/profile-picture\n"})}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-http",children:"POST /assets/users/234/background\n"})}),"\n",(0,l.jsx)(s.p,{children:"If they were blog-oriented:"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-http",children:"POST /assets/blog/123/post/5\n"})}),"\n",(0,l.jsxs)(s.p,{children:["Multiple assets can exist within a path. To add a new asset to an existing path, simply ",(0,l.jsx)(s.code,{children:"POST"})," to the same path. By default,\nfetching an asset at a given path will return the most-recently created asset, however, that can be changed using Query Selectors."]}),"\n",(0,l.jsx)(s.h2,{id:"content",children:"Content"}),"\n",(0,l.jsx)(s.p,{children:"The following content types are currently supported by Konifer:"}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{children:"Name"}),(0,l.jsx)(s.th,{children:"Content-Type"}),(0,l.jsx)(s.th,{children:"Format"}),(0,l.jsx)(s.th,{children:"Animated Format Supported"})]})}),(0,l.jsxs)(s.tbody,{children:[(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:"JPEG"}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"image/jpeg"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"jpg"})}),(0,l.jsx)(s.td,{children:"N/A"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:"PNG"}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"image/png"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"png"})}),(0,l.jsxs)(s.td,{children:["No (",(0,l.jsx)(s.code,{children:"apng"}),")"]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:"WEBP"}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"image/webp"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"webp"})}),(0,l.jsx)(s.td,{children:"Yes"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:"AVIF"}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"image/avif"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"avif"})}),(0,l.jsx)(s.td,{children:"No"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:"JPEG_XL"}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"image/jxl"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"jxl"})}),(0,l.jsx)(s.td,{children:"N/A"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:"HEIC"}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"image/heic"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"heic"})}),(0,l.jsx)(s.td,{children:"N/A"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:"GIF"}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"image/gif"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"gif"})}),(0,l.jsx)(s.td,{children:"Yes"})]})]})]}),"\n",(0,l.jsx)(s.h2,{id:"metadata",children:"Metadata"}),"\n",(0,l.jsx)(s.p,{children:"An asset can have the following metadata supplied when creating or updating an asset:"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"alt"}),"\n",(0,l.jsx)(s.li,{children:"labels"}),"\n",(0,l.jsx)(s.li,{children:"tags"}),"\n"]}),"\n",(0,l.jsx)(s.h2,{id:"alt",children:"Alt"}),"\n",(0,l.jsxs)(s.p,{children:["An ",(0,l.jsx)(s.code,{children:"alt"})," is intended to populate the ",(0,l.jsx)(s.code,{children:"alt"})," attribute of an HTML tag such as ",(0,l.jsx)(s.code,{children:"<img>"}),". It will be returned as asset metadata but\nwill also be returned in the ",(0,l.jsx)(s.code,{children:"Konifer-Alt"})," response header when requesting asset ",(0,l.jsx)(s.code,{children:"content"})," or ",(0,l.jsx)(s.code,{children:"link"}),". To comply with\ngeneral limits set by screen readers, the maximum length of an ",(0,l.jsx)(s.code,{children:"alt"})," is 125 characters."]}),"\n",(0,l.jsx)(s.h2,{id:"labels",children:"Labels"}),"\n",(0,l.jsxs)(s.p,{children:["Labels are key-value pairs used to define custom attributes to the asset. They are optional. Up to 50 labels can be associated to an asset.\nTo specify them when storing or updating an asset, use the ",(0,l.jsx)(s.code,{children:"labels"})," field in the request."]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-json",children:'{\n  "labels": {\n    "label-key": "label-value",\n    "phone": "Android"\n  }\n}\n'})}),"\n",(0,l.jsx)(s.h3,{id:"querying",children:"Querying"}),"\n",(0,l.jsx)(s.p,{children:"Labels can be used to query for assets. They are supplied as query parameters."}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-http",children:"GET /assets/users/123?label-key=label-value&phone=Android\n"})}),"\n",(0,l.jsxs)(s.p,{children:["Labels can also be combined with other query modifiers to further filter your results. For example, this returns the metadata of the 5 most-recently\ncreated assets containing the label of ",(0,l.jsx)(s.code,{children:"phone=iphone"}),":"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-http",children:"GET /assets/users/123/-/metadata/created/5?phone=iphone\n"})}),"\n",(0,l.jsx)(s.h3,{id:"deleting",children:"Deleting"}),"\n",(0,l.jsxs)(s.p,{children:["Labels can be used to delete assets and are used in the same manner as fetching assets. For example, this deletes the 5 most-recently\ncreated assets containing the label of ",(0,l.jsx)(s.code,{children:"phone=iphone"}),":"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-http",children:"DELETE /assets/users/123/-/created/5?phone=iphone\n"})}),"\n",(0,l.jsx)(s.h4,{id:"delete-all-with-labels",children:"Delete all with label(s)"}),"\n",(0,l.jsxs)(s.p,{children:["To delete all assets at a particular path, set your ",(0,l.jsx)(s.code,{children:"limit"})," to ",(0,l.jsx)(s.code,{children:"all"})," and supply the labels."]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-http",children:"DELETE /assets/users/123/-/all?phone=iphone\n"})}),"\n",(0,l.jsx)(s.h4,{id:"recursive-delete",children:"Recursive delete"}),"\n",(0,l.jsxs)(s.p,{children:["Recursive deletes can be performed with labels as well. To delete assets at and underneath a path, supply the label(s) and the ",(0,l.jsx)(s.code,{children:"recursive"})," modifier."]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-http",children:"DELETE /assets/users/123/-/recursive?phone=iphone\n"})}),"\n",(0,l.jsx)(s.h3,{id:"reserved-words",children:"Reserved words"}),"\n",(0,l.jsxs)(s.p,{children:["Labels and transformation parameters (",(0,l.jsx)(s.code,{children:"h"}),", ",(0,l.jsx)(s.code,{children:"w"}),", etc) are both defined using query parameters. To specify a label with the key ",(0,l.jsx)(s.code,{children:"w"}),", prefix the key with\n",(0,l.jsx)(s.code,{children:"label:"}),"."]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-http",children:"GET /assets/users/123/-/metadata/created/5?label:w=wValue\n"})}),"\n",(0,l.jsx)(s.p,{children:"Prefixing labels using reserved keys is not necessary when creating or updating labels through a POST or PUT."}),"\n",(0,l.jsx)(s.h3,{id:"rules",children:"Rules"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Maximum amount of labels: 50"}),"\n",(0,l.jsx)(s.li,{children:"Maximum label key length: 128 characters"}),"\n",(0,l.jsx)(s.li,{children:"Maximum label value length: 256 characters"}),"\n"]}),"\n",(0,l.jsx)(s.h2,{id:"tags",children:"Tags"}),"\n",(0,l.jsx)(s.p,{children:"Tags are similar to labels in that they are custom attributes assignable to an asset but differ in the following ways:"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"They are value-only and do not contain any key-value structure"}),"\n",(0,l.jsx)(s.li,{children:"They cannot be used to query or delete assets"}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:["To specify tags when storing or updating an asset, use the ",(0,l.jsx)(s.code,{children:"tags"})," field in the request."]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-json",children:'{\n  "tags": [ "happy", "smiling", "bread" ]\n}\n'})}),"\n",(0,l.jsx)(s.h3,{id:"rules-1",children:"Rules"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Maximum amount of tags: 50"}),"\n",(0,l.jsx)(s.li,{children:"Maximum tag value length: 256"}),"\n"]})]})}function o(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}}}]);