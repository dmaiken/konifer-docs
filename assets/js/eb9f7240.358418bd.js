"use strict";(globalThis.webpackChunkkonifer_docs=globalThis.webpackChunkkonifer_docs||[]).push([[524],{2390:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"Concepts/Assets/concepts-deleting-assets","title":"Deleting Assets","description":"Assets can be deleted using the same path selectors used for fetching. You can delete single assets by ID, multiple","source":"@site/docs/Concepts/Assets/deleting-assets.md","sourceDirName":"Concepts/Assets","slug":"/Concepts/Assets/concepts-deleting-assets","permalink":"/konifer-docs/Concepts/Assets/concepts-deleting-assets","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"id":"concepts-deleting-assets","title":"Deleting Assets","sidebar_label":"Deleting"},"sidebar":"docsSidebar","previous":{"title":"Updating","permalink":"/konifer-docs/Concepts/Assets/concepts-updating-assets"},"next":{"title":"Introduction","permalink":"/konifer-docs/Concepts/Variants/concepts-variants"}}');var i=t(4848),l=t(8453);const r={sidebar_position:5,id:"concepts-deleting-assets",title:"Deleting Assets",sidebar_label:"Deleting"},o=void 0,d={},a=[{value:"Delete Behavior",id:"delete-behavior",level:2},{value:"Idempotency",id:"idempotency",level:3},{value:"Deleting a specific asset",id:"deleting-a-specific-asset",level:2},{value:"Selectors",id:"selectors",level:2},{value:"Bulk &amp; recursive deletion",id:"bulk--recursive-deletion",level:2},{value:"Delete all assets in the path",id:"delete-all-assets-in-the-path",level:3},{value:"Recursive delete",id:"recursive-delete",level:3}];function c(e){const s={admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.p,{children:"Assets can be deleted using the same path selectors used for fetching. You can delete single assets by ID, multiple\nassets by order/limit, or entire path trees recursively."}),"\n",(0,i.jsx)(s.h2,{id:"delete-behavior",children:"Delete Behavior"}),"\n",(0,i.jsx)(s.p,{children:"When you issue a delete request:"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Metadata:"})," The database record is removed immediately. The asset is no longer discoverable or queryable via the API."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Content:"})," The binary content (in S3/Filesystem) is scheduled for asynchronous removal. It is usually physically deleted within a few minutes."]}),"\n"]}),"\n",(0,i.jsx)(s.admonition,{type:"warning",children:(0,i.jsx)(s.p,{children:"Deleting an asset is unrecoverable. There is no way to reverse a delete, and there is no soft-delete mechanism!"})}),"\n",(0,i.jsx)(s.h3,{id:"idempotency",children:"Idempotency"}),"\n",(0,i.jsxs)(s.p,{children:["The Delete API is idempotent. If you request the deletion of an asset that does not exist (or has already been deleted),\nthe API returns a ",(0,i.jsx)(s.code,{children:"204 No Content"}),"."]}),"\n",(0,i.jsx)(s.h2,{id:"deleting-a-specific-asset",children:"Deleting a specific asset"}),"\n",(0,i.jsxs)(s.p,{children:["To delete an asset explicitly, use the ",(0,i.jsx)(s.code,{children:"entry"})," selector. This is the safest way to delete an asset since the reference\nis absolute."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-http",children:"DELETE /assets/users/123/-/entry/0\n"})}),"\n",(0,i.jsx)(s.h2,{id:"selectors",children:"Selectors"}),"\n",(0,i.jsxs)(s.p,{children:["Similar to fetching, specifying the ",(0,i.jsx)(s.code,{children:"order"})," plus an optional limit (defaulting to 1) results in the top asset(s)\nin that ordering being deleted."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-http",children:"DELETE /assets/users/123/profile/-/modified\n"})}),"\n",(0,i.jsx)(s.p,{children:"This results in the single most-recently modified asset being deleted."}),"\n",(0,i.jsxs)(s.admonition,{type:"caution",children:[(0,i.jsx)(s.mdxAdmonitionTitle,{}),(0,i.jsxs)(s.p,{children:["Race condition risk on paths with high write volume, using relative selectors (like ",(0,i.jsx)(s.code,{children:"modified"}),") can result in\ndeleting data you did not intend to (e.g., a new file arrives milliseconds before your request). Use with care."]})]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-http",children:"DELETE /assets/users/123/profile/-/entry/0\n"})}),"\n",(0,i.jsxs)(s.p,{children:["This deletes the asset at ",(0,i.jsx)(s.code,{children:"/users/123/profile"})," with ",(0,i.jsx)(s.code,{children:"entryId"})," of 0."]}),"\n",(0,i.jsx)(s.h2,{id:"bulk--recursive-deletion",children:"Bulk & recursive deletion"}),"\n",(0,i.jsx)(s.p,{children:"Konifer supports powerful bulk-delete operations for cleaning up entire user directories or projects."}),"\n",(0,i.jsx)(s.h3,{id:"delete-all-assets-in-the-path",children:"Delete all assets in the path"}),"\n",(0,i.jsxs)(s.p,{children:["By setting the limit query parameter to ",(0,i.jsx)(s.code,{children:"-1"}),", all assets are deleted within the path."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-http",children:"DELETE /assets/users/123/profile?limit=-1\n"})}),"\n",(0,i.jsx)(s.h3,{id:"recursive-delete",children:"Recursive delete"}),"\n",(0,i.jsxs)(s.p,{children:["By using the ",(0,i.jsx)(s.code,{children:"recursive"})," selector, you can delete all assets in a path as well as all sub-paths."]}),"\n",(0,i.jsx)(s.admonition,{type:"tip",children:(0,i.jsx)(s.p,{children:"A common use-case of a recursive delete is if your paths are user-scoped, and that user is being deleted from your platform."})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-http",children:"DELETE /assets/users/123/-/recursive\n"})}),"\n",(0,i.jsxs)(s.p,{children:["This deletes assets at ",(0,i.jsx)(s.code,{children:"/user/123/profile"}),", ",(0,i.jsx)(s.code,{children:"user/123/profile/footer"}),", and ",(0,i.jsx)(s.code,{children:"user/123/background"}),", and any asset\nunderneath ",(0,i.jsx)(s.code,{children:"/user/123/"}),"."]})]})}function h(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,s,t)=>{t.d(s,{R:()=>r,x:()=>o});var n=t(6540);const i={},l=n.createContext(i);function r(e){const s=n.useContext(l);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),n.createElement(l.Provider,{value:s},e.children)}}}]);